# 2.5 Queueing a Series of State Updates (state ì—…ë°ì´íŠ¸ í)

state ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ìŒ ë Œë”ë§ì´ íì— ë“¤ì–´ê°€ëŠ”ë°, ë‹¤ìŒ ë Œë”ë§ì„ íì— ë„£ê¸° ì „ì—, ê°’ì— ëŒ€í•´ ì—¬ëŸ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ì„ë•Œê°€ ìˆëŠ”ë°, ì´ë¥¼ ìœ„í•´ state ì—…ë°ì´íŠ¸ë¥¼ ì–´ë–»ê²Œ ë°°ì¹˜í•˜ë©´ ì¢‹ì„ì§€ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

## React state batches ì—…ë°ì´íŠ¸

ReactëŠ” state ì—…ë°ì´íŠ¸ë¥¼ í•˜ê¸° ì „ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤. ì´ ë•Œë¬¸ì— ë¦¬ë Œë”ë§ì€ ëª¨ë“  setNumber() í˜¸ì¶œì´ ì™„ë£Œëœ ì´í›„ì—ë§Œ ì¼ì–´ë‚œë‹¤.
ì´ë ‡ê²Œ í•˜ë©´ ì¦ì€ ë¦¬ë Œë”ë§ì„ ë°©ì§€í•˜ê³  ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë‚˜ì˜¨ ë‹¤ìˆ˜ì˜ state ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ë™ì‘ì„ batchingì´ë¼ê³  í•œë‹¤.

<br />

## ë‹¤ìŒ ë Œë”ë§ ì „ì— ë™ì¼í•œ state ë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ ë²ˆ ì—…ë°ì´íŠ¸í•˜ê¸°

í”í•œ ì‚¬ë¡€ëŠ” ì•„ë‹ˆì§€ë§Œ, ë‹¤ìŒ ë Œë”ë§ ì „ì— ë™ì¼í•œ state ë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ë²ˆ ì—…ë°ì´íŠ¸ë¥¼ í• ìˆ˜ë„ ìˆë‹¤.
setNumber(n => n + 1) ì™€ ê°™ì´ ì´ì „ íì˜ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ stateë¥¼ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤. ì´ ë°©ë²•ì€ Reactì— "state ê°’ìœ¼ë¡œ ë¬´ì–¸ê°€ë¥¼ í•˜ë¼"ê³  ì§€ì‹œí•˜ëŠ” ë°©ë²•ì´ë‹¤.

```jsx
import { useState } from "react";

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button
        onClick={() => {
          setNumber((n) => n + 1);
          setNumber((n) => n + 1);
          setNumber((n) => n + 1);
        }}
      >
        +3
      </button>
    </>
  );
}
```

ì—¬ê¸°ì„œ n => n + 1ì€ ì—…ë°ì´í„° í•¨ìˆ˜ë¼ê³  ë¶€ë¥´ê³  Reactê°€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ë‹¤ë¥¸ ì½”ë“œê°€ ëª¨ë‘ ì‹¤í–‰ëœ í›„ì— í•¨ìˆ˜ê°€ ì²˜ë¦¬ë˜ë„ë¡ íì— ë„£ê³  ë‹¤ìŒ ë Œë”ë§ ì¤‘ì— íë¥¼ ìˆœíšŒí•˜ì—¬ ìµœì¢… ì—…ë°ì´íŠ¸ëœ stateë¥¼ ì œê³µí•œë‹¤.

| queued update | n   | returns   |
| ------------- | --- | --------- |
| n => n + 1    | 0   | 0 + 1 = 1 |
| n => n + 1    | 1   | 1 + 1 = 2 |
| n => n + 1    | 2   | 2 + 1 = 3 |

ìœ„ì™€ ê°™ì´ ReactëŠ” 3ì„ ìµœì¢… ê²°ê³¼ë¡œ ì €ì¥í•˜ê³  useStateì—ì„œ ë°˜í™˜í•œë‹¤.

### stateë¥¼ êµì²´í•œ í›„ ì—…ë°ì´íŠ¸í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?

```jsx
import { useState } from "react";

export default function Counter() {
  const [number, setNumber] = useState(0);

  return (
    <>
      <h1>{number}</h1>
      <button
        onClick={() => {
          setNumber(number + 5);
          setNumber((n) => n + 1);
        }}
      >
        Increase the number
      </button>
    </>
  );
}
```

ìœ„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë Œë”ë§í•˜ëŠ”ë™ì•ˆ ì•„ë˜ì™€ ê°™ì´ state íë¥¼ ìˆœíšŒí•œë‹¤.

| queued update    | n   | returns   |
| ---------------- | --- | --------- |
| â€replace with 5â€ | 0   | 5         |
| n => n + 1       | 5   | 5 + 1 = 6 |

ReactëŠ” 6ì„ ìµœì¢… ê²°ê³¼ë¡œ ì €ì¥í•˜ê³  useStateì—ì„œ ë°˜í™˜í•œë‹¤.

> ğŸ’¡ setState(5)ê°€ ë™ì‘í• ë•ŒëŠ” nì´ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.

## ìš”ì•½

- stateë¥¼ ì„¤ì •í•˜ë”ë¼ë„ ê¸°ì¡´ ë Œë”ë§ì˜ ë³€ìˆ˜ëŠ” ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©°, ëŒ€ì‹  ìƒˆë¡œìš´ ë Œë”ë§ì„ ìš”ì²­í•œë‹¤.
- ReactëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ì„ ë§ˆì¹œ í›„ state ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ batching ì´ë¼ê³  í•œë‹¤.
- í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ì—ì„œ ì¼ë¶€ stateë¥¼ ì—¬ëŸ¬ ë²ˆ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ setNumber(n => n + 1) ì—…ë°ì´í„° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
